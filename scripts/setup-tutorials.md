# 教程功能设置指南

本指南将帮助您设置Procreate笔刷网站的教程功能。

## 设置数据库表和结构

1. 登录到您的Supabase项目管理面板
2. 点击左侧导航栏中的"SQL编辑器"
3. 点击"新查询"按钮
4. 打开本地项目中的 `scripts/create_tutorials_table.sql` 文件，复制其内容
5. 粘贴到Supabase SQL编辑器窗口中
6. 点击"运行"按钮执行SQL脚本

这将创建以下内容：

- `tutorials` 表 - 存储所有教程
- `tutorial_comments` 表 - 存储教程评论
- 行级安全策略 - 确保数据访问安全
- 自动更新浏览量的函数

## 常见问题解决

### 创建教程时出现"Failed to load resource"错误

错误信息：
```
Failed to load resource: net::ERR_CONNECTION_CLOSED
```

这个错误通常是由于缩略图生成失败造成的。可能的原因：

1. **外部placeholder图片服务不可用** - 我们已经通过内联SVG替换解决了此问题
2. **网络连接问题** - 检查您的网络连接
3. **权限问题** - 确保用户有权限创建教程

### 教程表不存在错误

错误信息：
```
Tutorials table may not exist: Object
Error creating tutorial: Object
```

这表明`tutorials`表在数据库中不存在。按照本指南开头的步骤创建表，应能解决问题。

## 代码更改说明

我们对代码进行了以下更改：

1. **教程缩略图生成** - 使用内联SVG数据URL替代外部placeholder服务
2. **错误处理改进** - 更好地处理表不存在的情况
3. **添加备用内容** - 当数据库不可用时显示本地示例教程

## 测试步骤

在设置完成后，请按照以下步骤测试：

1. 登录网站（必须使用管理员账户才能创建教程）
2. 前往教程页面
3. 点击"添加新教程"按钮
4. 填写教程信息并提交
5. 确认教程已创建并显示
6. 刷新页面，确认教程仍然存在

如果按照上述步骤操作后仍有问题，请查看浏览器控制台中的错误信息，这可能提供更多有关问题的线索。 